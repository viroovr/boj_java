# BOJ 2816

## 🧾 문제 정보

* 🔗 문제 링크: [https://www.acmicpc.net/problem/2816](https://www.acmicpc.net/problem/2816)
* ⏱ 시간 제한: 1000 ms
* 💾 메모리 제한: 128 MB

---

## 1. 문제 개요

리모컨 조작 명령(`1`, `4`)을 사용해 채널 목록에서
`KBS1`을 **첫 번째**, `KBS2`를 **두 번째 위치**로 이동시키는 문제이다.

핵심은 **채널을 실제로 이동시키는 것이 아니라**,
해당 위치를 만들기 위한 **명령 시퀀스를 출력**하는 것이다.

---

## 2. 초기 접근 방식

* 입력된 채널 목록에서 `KBS1`, `KBS2`의 초기 인덱스를 탐색
* `KBS1`을 최상단으로 이동
* 이후 `KBS2`를 두 번째 위치로 이동
* 각 이동 과정에서 필요한 `"1"`(위로 이동), `"4"`(선택 이동) 명령을 순서대로 출력

---

## 3. 문제점

초기 구현의 주요 한계는 다음과 같다.

* 조건 분기(`if`)와 반복문 구조가 복잡하게 얽혀 있음
* 이동 로직이 코드 곳곳에 분산되어 **의도가 한눈에 보이지 않음**
* 동일한 `"1" → "4"` 패턴이 중복 구현됨
* JVM 관점에서 실행 경로가 불안정하여 실행 시간 분산이 큼

👉 **정답은 맞지만, 유지보수성과 실행 안정성이 떨어지는 구조**였다.

---

## 4. 개선된 접근

리팩토링의 핵심 목표는 **알고리즘 변경이 아니라 제어 흐름 단순화**였다.

### 핵심 아이디어

1. `"위로 이동 → 선택 이동"` 패턴을 하나의 메서드로 추출
2. `KBS1` 이동 후, `KBS2` 인덱스 보정 로직을 명시적으로 표현
3. 반복문 구조를 고정하여 JVM JIT 최적화가 적용되기 쉬운 형태로 정리

```java
move(sb, up, select);
```

👉 결과적으로 **실행 경로가 예측 가능해지고**,
JIT 인라이닝 및 루프 최적화가 안정적으로 동작할 수 있는 코드가 되었다.

---

## 5. 개선 효과

### 시간·공간 복잡도

* 시간 복잡도: **O(N)** → **O(N)** (동일)
* 공간 복잡도: **O(1)** (StringBuilder 제외)

### 실행 성능 변화

* 평균 실행 시간: **최대 약 17% 감소**
* 실행 시간 변동성(CV): **약 60% 이상 감소**
* 모든 테스트케이스에서 **통계적으로 유의미한 성능 개선 확인**

👉 알고리즘은 같지만, **코드 구조 개선만으로도 성능 안정성과 평균 성능이 동시에 향상**됨.

---

## 6. 회고

* “리팩토링은 가독성만 좋아지는 작업”이라는 인식이 틀렸음을 체감했다.
* **제어 흐름 단순화와 반복 패턴 정규화**만으로도 JVM 최적화 결과가 달라질 수 있다.
* 평균 실행 시간보다 **표준편차와 CV가 더 중요한 지표**임을 실험으로 확인했다.
* 단순 문제라도 **성능을 측정하고 검증하는 습관**이 큰 차이를 만든다.

---


## ⏱ 실행 시간 성능 분석 (자동 생성)

> phase × 테스트케이스(tc) 기준 자동 분석  
> Δ%는 평균 실행 시간(Avg)을 기준으로 계산됨

| Phase | TC | Avg(ms) | Δ% | StdDev | CV(%) | N |
|:----:|:--:|-------:|---:|-------:|------:|--:|
| baseline | 1 | 113.29 | - | 11.45 | 10.11 | 90 |
| refactor1 | 1 | 110.06 | 2.85 | 10.22 | 9.29 | 90 |
| baseline | 2 | 106.22 | - | 6.62 | 6.23 | 90 |
| refactor1 | 2 | 104 | 2.09 | 4.49 | 4.32 | 90 |
| baseline | 3 | 108.02 | - | 8.04 | 7.44 | 90 |
| refactor1 | 3 | 103.58 | 4.11 | 3.93 | 3.8 | 90 |
| baseline | 4 | 109.08 | - | 7.44 | 6.82 | 90 |
| refactor1 | 4 | 103.89 | 4.76 | 3.74 | 3.6 | 90 |
| baseline | 5 | 110.5 | - | 8.9 | 8.06 | 90 |
| refactor1 | 5 | 103.01 | 6.78 | 3.09 | 3 | 90 |
| baseline | 6 | 105.03 | - | 4.48 | 4.27 | 90 |
| refactor1 | 6 | 103.33 | 1.62 | 3.48 | 3.37 | 90 |
| baseline | 7 | 124.02 | - | 14.55 | 11.73 | 90 |
| refactor1 | 7 | 102.79 | 17.12 | 3.67 | 3.57 | 90 |
| baseline | 8 | 114.07 | - | 10.02 | 8.78 | 90 |
| refactor1 | 8 | 102.77 | 9.91 | 3.22 | 3.14 | 90 |



## 📊 통계적 유의성 검증 (Welch t-test)

- 유의수준 α = 0.05
- 대상 데이터: tag=sample (warmup / trim 제외)
- 검정 방식: 독립 2표본 Welch t-test
- p-value 계산:
  - df > 100 : 정규분포 근사
  - df ≤ 100 : Cornish–Fisher 보정된 t-분포 근사
- Cohen’s d 기준
  - |d| < 0.2 : NEGLIGIBLE
  - 0.2–0.5   : SMALL
  - 0.5–0.8   : MEDIUM
  - ≥ 0.8     : LARGE

| TC | Phase 비교 | n1 | n2 | t-value | p-value | Cohen’s d | Effect | Significant |
|:--:|:-----------|------:|------:|--------:|--------:|----------:|:------:|:-----------:|
| 1 | baseline → refactor1 | 90 | 90 |1.998 | 0.04568 | 0.298 | SMALL | YES |
| 2 | baseline → refactor1 | 90 | 90 |2.636 | 0.00838 | 0.393 | SMALL | YES |
| 3 | baseline → refactor1 | 90 | 90 |4.713 | 0 | 0.703 | MEDIUM | YES |
| 4 | baseline → refactor1 | 90 | 90 |5.912 | 0 | 0.881 | LARGE | YES |
| 5 | baseline → refactor1 | 90 | 90 |7.54 | 0 | 1.124 | LARGE | YES |
| 6 | baseline → refactor1 | 90 | 90 |2.842 | 0.00449 | 0.424 | SMALL | YES |
| 7 | baseline → refactor1 | 90 | 90 |13.425 | 0 | 2.001 | LARGE | YES |
| 8 | baseline → refactor1 | 90 | 90 |10.188 | 0 | 1.519 | LARGE | YES |
