# BOJ 1541

## 1. 문제 개요

양수와 +, -로 이루어진 수식에서 모든 괄호가 제거된 상태가 주어진다.
괄호를 적절히 다시 배치하여 식의 값을 최소화하는 것이 목표다.

연산자: +, -만 존재

괄호 사용 횟수 및 중첩 제한 없음

수식 길이 ≤ 50

## 2. 초기 접근 방식

문제 문구상 괄호를 “적절히” 배치할 수 있고, 중첩 제한도 없기 때문에
일반적인 수식 최적화 문제로 해석하였다.

숫자 구간 [i, j]에 대해 최솟값을 구하는 구간 DP 설계

min[i][j] / max[i][j]를 유지하며 연산자 기준 분할

모든 괄호 배치 경우를 포괄적으로 탐색

## 3. 문제점

1) 과도한 계산

숫자 개수를 N이라 할 때 O(N³) 구간 DP

이 문제에서 실제로 필요하지 않은 경우까지 전부 계산

2) 문제 구조에 비해 과한 설계

연산자가 +, -만 존재함에도

모든 괄호 중첩 경우를 고려하는 것은 불필요한 일반화

3) 실행 성능 저하

DP 테이블 및 중첩 루프로 인한 실행 시간 증가

문제 제한 대비 과도한 비용

## 4. 개선된 접근

핵심 아이디어

첫 번째 - 이후에 등장하는 모든 수를
하나의 괄호로 묶어 전부 빼면 항상 최솟값이 된다.

이유

+는 값을 증가시키는 연산

- 이후에서 다시 값을 키우는 것은 최솟값 관점에서 손해

중첩 괄호를 사용해 부호를 다시 뒤집는 선택은 항상 결과를 악화시킴

따라서 최적 괄호 구조는 항상 다음 형태로 수렴한다.

```math
A - (B + C + D + E + ...)
```

## 5. 개선 효과

| 항목     | 초기 DP | 개선된 그리디  |
| ------ | ----- | -------- |
| 시간 복잡도 | O(N³) | **O(N)** |
| 공간 복잡도 | O(N²) | **O(1)** |
| 구현 난이도 | 높음    | 낮음       |
| 문제 적합성 | 과잉    | 최적       |


## 6. 회고

문제 문구만 보고 일반적인 DP 문제로 해석하면 과도한 설계로 이어질 수 있음을 경험했다.

연산자의 성질(+, -)과 목표(최솟값)를 분석하면
최적 구조가 하나로 고정되는 특수 케이스임을 파악할 수 있었다.

이 문제를 통해
“DP로 풀 수 있는 문제”와 “DP를 써서는 안 되는 문제”를 구분하는 기준을 명확히 정립했다.

이후 유사 문제에서 그리디 가능 여부를 빠르게 판단하는 기준점으로 활용할 수 있게 되었다.



## ⏱ 실행 시간 성능 분석 (자동 생성)

> phase × 테스트케이스(tc) 기준 자동 분석  
> Δ%는 평균 실행 시간(Avg)을 기준으로 계산됨

| Phase | TC | Avg(ms) | Δ% | StdDev | CV(%) | N |
|:----:|:--:|-------:|---:|-------:|------:|--:|
| baseline | 1 | 117.91 | - | 9.89 | 8.39 | 90 |
| opt1 | 1 | 108.77 | 7.75 | 7.34 | 6.75 | 90 |
| baseline | 2 | 106.37 | - | 5.5 | 5.17 | 90 |
| opt1 | 2 | 108.03 | -1.56 | 6.81 | 6.3 | 90 |
| baseline | 3 | 110.81 | - | 9.29 | 8.39 | 90 |
| opt1 | 3 | 106.06 | 4.29 | 5.4 | 5.09 | 90 |



## 📊 통계적 유의성 검증 (Welch t-test)

- 유의수준 α = 0.05
- 대상 데이터: tag=sample (warmup / trim 제외)
- 검정 방식: 독립 2표본 Welch t-test
- p-value 계산:
  - df > 100 : 정규분포 근사
  - df ≤ 100 : Cornish–Fisher 보정된 t-분포 근사
- Cohen’s d 기준
  - |d| < 0.2 : NEGLIGIBLE
  - 0.2–0.5   : SMALL
  - 0.5–0.8   : MEDIUM
  - ≥ 0.8     : LARGE

| TC | Phase 비교 | n1 | n2 | t-value | p-value | Cohen’s d | Effect | Significant |
|:--:|:-----------|------:|------:|--------:|--------:|----------:|:------:|:-----------:|
| 1 | baseline → opt1 | 90 | 90 |7.041 | 0 | 1.05 | LARGE | YES |
| 2 | baseline → opt1 | 90 | 90 |-1.807 | 0.07084 | -0.269 | NEGLIGIBLE | NO |
| 3 | baseline → opt1 | 90 | 90 |4.199 | 3E-05 | 0.626 | MEDIUM | YES |

